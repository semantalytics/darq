<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>



  
  
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">


  


  
  
  
  <title>DARQ - Federated Queries with SPARQL</title>
  <meta name="author" content="Bastian Quilitz">



  
  
  <meta name="description" content="DARQ provides transparent query access to multiple, distributed SPARQL services as if querying a single RDF graph.">



  
  
  <meta name="keywords" content="SPARQL, RDF, DARQ, federated, query">



  
  
  <meta name="DC.title" content="DARQ - Federated Queries with SPARQL">



  
  
  <meta name="DC.creator" content="Bastian Quilitz">



  
  
  <meta name="DC.description" content="DARQ provides transparent query access to multiple, distributed SPARQL services as if querying a single RDF graph.">



  
  
  <style type="text/css">
body { margin: 3em 4em;
max-width: 36em;
}
h1 { margin: 1em 0pt 1.5em;
font-size: 200%;
text-align: center;
}
h2 { margin: 1.2em 0pt 0.3em;
font-size: 140%;
}
h3 { margin: 1.2em 0pt 0.3em;
font-size: 100%;
}
p { margin: 0pt 0pt 1em;
}
dt { margin: 2em 0pt 1em;
}
dt, dt tt { font-weight: bold;
}
dt tt { font-size: 120%;
}
ul { padding-left: 1.2em;
margin-left: 0pt;
}
ol { padding-left: 1.5em;
margin-left: 0pt;
}
li { margin: 0pt 0pt 0.4em;
padding: 0pt;
}
pre { padding: 1em 0pt 1em 1.5em;
background: rgb(238, 238, 238) none repeat scroll 0% 50%;
-moz-background-clip: initial;
-moz-background-origin: initial;
-moz-background-inline-policy: initial;
overflow: visible;
}
tt { font-size: 90%;
}
h1, h2, h3, dt, strong { font-family: Helvetica,Arial,sans-serif;
color: rgb(0, 0, 153);
}
.footer { border-top: 1px solid black;
margin: 3em 0pt 0pt;
}
@media print {
body { margin: 0pt;
font-size: 11pt;
}
}
  </style>
</head>


<body>



<h1>DARQ -<br>



Federated Queries with SPARQL</h1>



<div style="text-align: center;">Bastian Quilitz <br>



( [my first name] [at] quilitz [dot] de
)
<br>



<br>



</div>



Last update: &nbsp;23.06.2006
<h2>Overview</h2>



<p>DARQ is a&nbsp;query engine for
federated <a href="http://www.w3.org/TR/rdf-sparql-query/">SPARQL</a>
queries. It provides transparent query access to multiple, distributed
SPARQL endpoints as if querying a single RDF graph. &nbsp;DARQ
enables the applications to see a single query interface, leaving the
details of federation to the query engine.&nbsp;</p>



<p>DARQ extends&nbsp;Andy Seaborne's <a href="http://jena.sourceforge.net/ARQ/">ARQ</a> by
adding a new query planning algorithm and a modified query execution
engine. The work on DARQ&nbsp;includes a service description
language and a basic query optimization algorithm.</p>



<p>The query engine is in an early stage of development. It
cannot deal with
all
SPARQL queries and is not fully tested (see&nbsp;<a href="#Limitations_and_known_issues">Limitations and known
issues</a>).</p>



<ul>



  <li>Source code is available through&nbsp;SVN.</li>



  <li>License:&nbsp;<a href="http://jena.sourceforge.net/license.html">as per Jena</a></li>



</ul>




<p>I'll be happy&nbsp;receive comments and feedback. There will be a mailing list soon.</p>



<p>The <span style="font-weight: bold;">Sourceforge</span>
project page can be found <a href="http://www.sf.net/projects/darq/">here</a>.</p>



<h3>Requirements</h3>



<ul>



  
  
  <ul>



    <li>Java 1.5</li>



  
  
  </ul>



  
  
  <ul>



    <li>Jena 2.4</li>

    <li>ARQ 1.4 (not compatible with ARQ shipped with Jena 2.4!)</li>



    <li>The required jars are included in lib/ .</li>



  
  
  </ul>



</ul>



<h2>Contents</h2>



<ol>



  <li><a href="#Download_and_SVN_access">Download
and SVN access</a></li>



  <li><a href="#Example:_Querying_two_SPARQL_endpoints">Example: Using DARQ</a></li>



  <li><a href="index.html#Service_Descriptions">Service
Descriptions</a></li>



  <li><a href="#Limitations_and_known_issues">Limitations
and known issues</a></li>



</ol>



<h2><a name="Download_and_SVN_access"></a>Download
and SVN access</h2>



<p>DARQ is&nbsp;only available as Java source code
from the SVN repository.</p>



<pre>svn co https://svn.sourceforge.net/svnroot/darq/darq/trunk darq<tt></tt></pre>





<h2><a name="Example:_Querying_two_SPARQL_endpoints"></a>Example:
Using DARQ</h2>



<p>DARQ provides&nbsp;a single query interface (same as ARQ),
leaving the
details of federation to the query engine. The example registers the
DARQ query engine, executes the query and outputs the results.&nbsp;</p>



<p>When registering the query engine DARQ requires a
configuration file which includes the <a href="#Service_Descriptions">Service Descriptions</a>.</p>



<pre>// register new FedQueryEngineFactory and load configuration from file<br>FedQueryEngineFactory.register(configfile);<br><br>// create query<br>Query query = QueryFactory.create(querystring);<br><br>// get query engine<br>// DarqDataset is a dummy.<br>QueryExecution qe = QueryExecutionFactory.create(query, new DarqDataset());<br><br>// execute query<br>ResultSet rs = qe.execSelect();<br><br>// output results<br>ResultSetFormatter.out(System.out, rs, query);<br></pre>



<h2><a name="Service_Descriptions"></a>Service
Descriptions</h2>



Service Descriptions specify the capabilities of a SPARQL endpoint.
They provide a declarative description of the data available from an
endpoint, the definition of limitations on access patterns and
statistical information about the available data that is used for query
optimization.<br>



<br>



Following shows an example for&nbsp;Service Descriptions:<br>



<pre>@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .<br>@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .<br>@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .<br>@prefix sd: &lt;http://darq.sf.net/dose/0.1#&gt; .<br><br>@prefix foaf: &lt;http://xmlns.com/foaf/0.1/#&gt; .<br><br># definition of an endpoint<br>[] a sd:Service ;<br> rdfs:label "Foaf Service" ;<br> rdfs:comment "Service for FOAF data" ;<br><br>	# the endpoint url<br>	sd:url "http://localhost:2020/ldap" ;<br><br>	# capabilities of the endpoint<br>	sd:capability [ <br><br>	# the endpoint stores triples with predicate rdf:type<br>	sd:predicate rdf:type ; <br><br>	# Restriction on the subject/object<br> 	# Every legal SPARQL filter expression is allowed.<br>	#<br> 	# only queries for the type http://xmlns.com/foaf/0.1/#Person <br>	# are allowed<br><br>	sd:sofilter "REGEX(STR(?object),'http://xmlns.com/foaf/0.1/#Person')" ; <br>	# could also use ?subject <br><br>	# statistical information<br><br>	# number of triples that will be returned by<br>	#&nbsp;a "?s rdf:type ?o" query<br>	sd:triples 18000 ; <br><br>	# other propeties are:<br>	# Selectivity of a triple pattern, when object/subject is bound<br> 	# sd:objectSelectivity (default=1)<br> 	# sd:subjectSelectivity (default=1/x, <br>	# where x is the value given by sd:triples)<br><br>	];<br><br>	sd:capability [ <br>	<br>	# the endpoint stores triples with predicate foaf:name<br>	sd:predicate foaf:name ; <br><br>	# no filter on subject or object<br>	sd:sofilter "" ; <br><br>	# statistical information<br><br>	# there are 18000 triples with predicate foaf:name<br>	sd:triples 18000 ; <br><br>	# if the object in the triple pattern is bound <br>	# (e.g. ?s foaf:name 'Bastian Quilitz") the result size will be<br>	# reduced by factor 0.02. (on average)<br>	sd:objectSelectivity "0.02"^^xsd:double ;<br><br>	] ;<br><br>	sd:capability [ <br>		sd:predicate foaf:mbox ; <br>		sd:sofilter "" ; <br>		sd:triples 18000 ; <br>		sd:objectSelectivity 5.5E-5 <br>	] ;<br>	<br><br>	# whether the service is definitive or not<br>	# sd:isDefinitive (default=false)<br>	# sd:isDefinitive "true"^^xsd:boolean ;<br>	<br>	# limitations on access patterns<br>	# the query for this service must either contain a triple pattern <br>	# with predicate foaf:name and a bound object or <br>	# a pattern with predicate foaf:mbox and a bound object.<br>	# not shown here: sd:subjectBinding -&gt; subject must be bound<br>	sd:requiredBindings [ sd:objectBinding foaf:name ] ;<br>	sd:requiredBindings [ sd:objectBinding foaf:mbox ] ;<br><br>	# total number of triples in the store<br>	sd:totalTriples 108000; <br>	.<br></pre>



<h2><a name="Limitations_and_known_issues"></a>Limitations
and known issues</h2>



<ul>



  <li>DARQ is in an early stage of
development.
No extensive testing has been performed.</li>



  <li>Since DARQ uses predicates to decide where to send&nbsp;triple
patterns,&nbsp;no ?s ?p ?o queries are supported - predicates must
be bound.</li>



  <li>Joins using Blank nodes are not supported. If a join
operation finds a blank node an exception will be thrown.</li>



  <li>DESCRIBE is not supported.</li>



  <li>GRAPH is not supported.</li>



  <li>Query optimization is not very performant and will not
support many endpoint or triples. #endpoints, #triples/endpoint &lt; 7 are a
good choice for the moment.</li>



</ul>



<br>



DARQ is hosted by sourceforge.net<br>



<a href="http://sourceforge.net"><img src="sflogo.php" alt="SourceForge.net Logo" border="0" height="62" width="210"></a>
<div class="footer">$ID$<br>



</div>



</body>
</html>
